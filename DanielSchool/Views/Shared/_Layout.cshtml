@using Microsoft.AspNetCore.Http
@using DanielSchool.Core.Application.Dtos.Account
@using DanielSchool.Core.Application.Helpers
@using DanielSchool.Core.Application.Enums
@inject IHttpContextAccessor httpContextAccessor
@{
    var User = httpContextAccessor.HttpContext.Session.Get<AuthenticationResponse>("user");
    var isAdmin = User != null ? User.Roles.Any(r => r == EnumRoles.Admin.ToString()) : false;
    var isStudent = User != null ? User.Roles.Any(r => r == EnumRoles.Estudiante.ToString()) : false;
    var isTeacher = User != null ? User.Roles.Any(r => r == EnumRoles.Profesor.ToString()) : false;

}
<!DOCTYPE html>
<html lang="es-es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - DanielSchool</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
                <img src="~/img/ProjectImages/Icons/ds.png" alt="" style="width:50px ;">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link active" asp-area="" asp-controller="@(User==null ? "Home": $"{User.Roles.FirstOrDefault()}")" asp-action="Index">DS Tecnology</a>
                        </li>
                        @if (User != null)
                        {
                            if (isAdmin)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" asp-controller="Grades" asp-action="Index">Grades</a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" asp-controller="Tutorial" asp-action="Index">Tutorials</a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" asp-controller="Compiler" asp-action="Index">python compiler DEMO</a>
                                </li>
                            }
                            if(isTeacher)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" asp-controller="ProfesorController" asp-action="#">Grades</a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" asp-controller="ProfesorController" asp-action="#">Tutorials</a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" asp-controller="ProfesorController" asp-action="#">python compiler DEMO</a>
                                </li>
                            }
                            if (isStudent)
                            {

                                <li class="nav-item">
                                    <a class="nav-link" asp-controller="Tutorial" asp-action="Index">Tutorials</a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" asp-controller="Compiler" asp-action="Index">python compiler DEMO</a>
                                </li>
                            }

                        }
                        else
                        {

                            <li class="nav-item">
                                <a class="nav-link" asp-controller="Home" asp-action="AboutUs" tabindex="-1" aria-current="true">About Us</a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" asp-controller="Home" asp-action="ContactUs">Contat us</a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" asp-controller="Tutorial" asp-action="Index">Tutorials</a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" asp-controller="Compiler" asp-action="Index">python compiler DEMO</a>
                            </li>
                        }
                            
                        

                    </ul>
                    <div class="d-flex">
                        @if (User != null)
                        {
                            <a class="btn btn-danger" asp-controller="User" asp-action="LogOut">Cerrar Sesion</a>
                        }
                        else
                        {
                            <a class="btn btn-success" asp-controller="User" asp-action="Index">Iniciar Sesion</a>
                        }
                    </div>
                </div>
            </div>
        </nav>
    </header>
    
    <div class="contaier">
        @if (isStudent)
        {
            <div class="row">
                <div class="col-3" style="margin-bottom:0px; padding-bottom:0px;">
                <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">

                    <symbol id="pen" viewBox="0 0 16 16">
                      <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001zm-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708l-1.585-1.585z"/>
                    </symbol>
                
                    <symbol id="book" viewBox="0 0 16 16">
                      <path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/>
                    </symbol>
                
                    <symbol id="sheet" viewBox="0 0 16 16">
                      <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V9H3V2a1 1 0 0 1 1-1h5.5v2zM3 12v-2h2v2H3zm0 1h2v2H4a1 1 0 0 1-1-1v-1zm3 2v-2h3v2H6zm4 0v-2h3v1a1 1 0 0 1-1 1h-2zm3-3h-3v-2h3v2zm-7 0v-2h3v2H6z"/>
                    </symbol>
                    
                    <symbol id="exams" viewBox="0 0 16 16">
                        <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                    </symbol>
                
                    <symbol id="news" viewBox="0 0 16 16">
                        <path d="M0 2.5A1.5 1.5 0 0 1 1.5 1h11A1.5 1.5 0 0 1 14 2.5v10.528c0 .3-.05.654-.238.972h.738a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 1 1 0v9a1.5 1.5 0 0 1-1.5 1.5H1.497A1.497 1.497 0 0 1 0 13.5v-11zM12 14c.37 0 .654-.211.853-.441.092-.106.147-.279.147-.531V2.5a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0-.5.5v11c0 .278.223.5.497.5H12z"/>
                    </symbol>  
                
                    <symbol id="list" viewBox="0 0 16 16"> 
                      <path d="M7.646 15.854a.5.5 0 0 0 .708 0L10.207 14H14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h3.793l1.853 1.854zM1 9V6h14v3H1zm14 1v2a1 1 0 0 1-1 1h-3.793a1 1 0 0 0-.707.293l-1.5 1.5-1.5-1.5A1 1 0 0 0 5.793 13H2a1 1 0 0 1-1-1v-2h14zm0-5H1V3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v2zM2 11.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 0-1h-8a.5.5 0 0 0-.5.5zm0-4a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 0-1h-11a.5.5 0 0 0-.5.5zm0-4a.5.5 0 0 0 .5.5h6a.5.5 0 0 0 0-1h-6a.5.5 0 0 0-.5.5z"/>
                    </symbol> 
                
                </svg>
                <div class="d-flex flex-column flex-shrink-0 p-3 bg-light" style="width: 280px; height: 800px;">
                    <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none">
                      <svg class="bi me-2" width="40" height="32"><use xlink:href="#bootstrap"></use></svg>
                      <span class="fs-4">DSBoard</span>
                    </a>
                    <hr>
                    <ul class="nav nav-pills flex-column mb-auto">
                      <li class="nav-item">
                        <a asp-controller="Estudiante" asp-action="Qualification" class="nav-link @(User.Action == EnumActionStudent.Qualification.ToString()? "Active":"link-dark")" aria-current="page">
                          <svg class="bi me-2" width="16" height="16"><use xlink:href="#pen"></use></svg>
                          Qualifications
                        </a>
                      </li>
                
                      <li>
                        <a asp-controller="Estudiante" asp-action="Content" class="nav-link @(User.Action == EnumActionStudent.Content.ToString()? "Active":"link-dark")">
                          <svg class="bi me-2" width="16" height="16"><use xlink:href="#list"></use></svg>
                          Content
                        </a>
                      </li>
                
                      <li>
                        <a asp-controller="Estudiante" asp-action="Asignature" class="nav-link @(User.Action == EnumActionStudent.Asignature.ToString()? "Active":"link-dark")">
                          <svg class="bi me-2" width="16" height="16"><use xlink:href="#book"></use></svg>
                          Asignatures
                        </a>
                      </li>
                      <li>
                        <a asp-controller="Estudiante" asp-action="Practice" class="nav-link @(User.Action == EnumActionStudent.Practices.ToString()? "Active":"link-dark")">
                          <svg class="bi me-2" width="16" height="16"><use xlink:href="#sheet"></use></svg>
                          Practices
                        </a>
                      </li>
                      <li>
                        <a asp-controller="Estudiante" asp-action="Exam" class="nav-link @(User.Action == EnumActionStudent.Examns.ToString()? "Active":"link-dark")">
                          <svg class="bi me-2" width="16" height="16"><use xlink:href="#exams"></use></svg>
                          Exams
                        </a>
                      </li>
                      <li>
                        <a asp-controller="Home" asp-action="Index" class="nav-link @(User.Action == EnumActionStudent.New.ToString()? "Active":"link-dark")">
                          <svg class="bi me-2" width="16" height="16"><use xlink:href="#news"></use></svg>
                          News
                        </a>
                      </li>
                
                      <img style="border: 1px solid rgb(3, 34, 22); margin-top: 10px; margin-left: 20px; border-radius:50%;" src="/img/ProjectImages/General/StudentIcon.png"  alt="..." width="200px" height="200px">
                      <div style="margin-top: 30px; text-align: center;">
                        <h1 style="font-size: 30px;"> Alanna Jamil</h1>
                        <h1 style="font-size: 30px;"> 6th Basica</h1>
                      </div>
                    </ul>
                </div>
            </div>
                <div class="col-9" style="margin-left:0px; padding-left:0px;">
                <main role="main" class="">
                    @RenderBody()
                </main
            </div>
            </div>
            
        }
        <main role="main" class="">
            @RenderBody()
        </main>
    </div>

    <footer class="border-top footer text-muted">
        <div class="container" style="height:0px">
            &copy; 2022 - DanielSchool
        </div>
    </footer>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
